@if (isLoading()) {
    <div class="d-flex justify-content-center my-4">
        <mat-spinner />
    </div>
}
@else if (error()) {
    <div class="d-flex justify-content-center alert alert-danger my-5">
        {{ error() }}
    </div>
}
@else {
    <div class="shadow">
        <mat-toolbar class="justify-content-between invite-toolbar">
            <div class="flex gap-3 align-items-center invite-toolbar-group">
                <mat-form-field subscriptSizing="dynamic" appearance="outline" class="invite-search-field">
                    <mat-icon matPrefix>search</mat-icon>
                    <mat-label>Search</mat-label>
                    <input matInput (input)="filterText.set($any($event.target).value)">
                </mat-form-field>
            </div>
        
            <button matButton="elevated" (click)="invitePlayers()" class="invite-action-button">
                <mat-icon>group_add</mat-icon>
                Invite Players
            </button>
        </mat-toolbar>
        
        <div class="invite-table-wrapper">
            <table mat-table [dataSource]="dataSource()" matSort>
        
                <ng-container matColumnDef="player">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Player </th>
                    <td mat-cell *matCellDef="let invite"> {{invite.player}} </td>
                </ng-container>
        
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
                    <td mat-cell *matCellDef="let invite"> {{invite.email}} </td>
                </ng-container>
        
                <ng-container matColumnDef="team">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Team </th>
                    <td mat-cell *matCellDef="let invite"> {{invite.team}} </td>
                </ng-container>
        
                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                    <td mat-cell *matCellDef="let invite">
                        @if (invite.status === 'Pending') {
                        <h6 class="mb-0">
                            <span class="badge bg-secondary" style="width: 70px">Pending</span>
                        </h6>
                        }
                        @else {
                        <h6 class="mb-0">
                            <span class="badge bg-success" style="width: 70px">Accepted</span>
                        </h6>
                        }
                    </td>
                </ng-container>
        
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell text-center" [attr.colspan]="displayedColumns.length">
                        <div class="my-4 text-muted">
                            <strong><i>No coach invites</i></strong>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
}
